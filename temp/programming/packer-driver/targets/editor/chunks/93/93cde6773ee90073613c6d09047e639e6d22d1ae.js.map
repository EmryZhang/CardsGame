{"version":3,"sources":["file:///D:/Work/job/CardsGame/assets/Classes/models/RuntimeCardData.ts"],"names":["RuntimeCardData","constructor","config","id","isFaceUp","isLocked","currentArea","position","x","y","zIndex","stateHistory","generateId","Position","Date","now","Math","random","toString","substr","saveState","push","restoreState","length","lastState","pop","clearHistory","getHistoryCount"],"mappings":";;;8BAKaA,e;;;;;;;;;;;;;;;;;;;AAHb;AACA;AACA;iCACaA,e,GAAN,MAAMA,eAAN,CAAsB;AAYzBC,QAAAA,WAAW,CAACC,MAAD,EAAqBC,EAArB,EAAkC;AAAA,eAX7BA,EAW6B;AAAA,eAV7BD,MAU6B;AAAA,eARtCE,QAQsC,GARlB,KAQkB;AAAA,eAPtCC,QAOsC,GAPlB,KAOkB;AAAA,eANtCC,WAMsC,GANhB,EAMgB;AAAA,eALtCC,QAKsC,GALD;AAAEC,YAAAA,CAAC,EAAE,CAAL;AAAQC,YAAAA,CAAC,EAAE;AAAX,WAKC;AAAA,eAJtCC,MAIsC,GAJrB,CAIqB;AAAA,eAFrCC,YAEqC,GAFT,EAES;AACzC,eAAKT,MAAL,GAAcA,MAAd;AACA,eAAKC,EAAL,GAAUA,EAAE,IAAI,KAAKS,UAAL,EAAhB;AACA,eAAKL,QAAL,GAAgB,EAAE,GAAGL,MAAM,CAACW;AAAZ,WAAhB;AACH;;AAEOD,QAAAA,UAAU,GAAW;AACzB,iBAAQ,QAAOE,IAAI,CAACC,GAAL,EAAW,IAAGC,IAAI,CAACC,MAAL,GAAcC,QAAd,CAAuB,EAAvB,EAA2BC,MAA3B,CAAkC,CAAlC,EAAqC,CAArC,CAAwC,EAArE;AACH,SApBwB,CAsBzB;;;AACOC,QAAAA,SAAS,GAAS;AACrB,eAAKT,YAAL,CAAkBU,IAAlB,CAAuB;AACnBjB,YAAAA,QAAQ,EAAE,KAAKA,QADI;AAEnBC,YAAAA,QAAQ,EAAE,KAAKA,QAFI;AAGnBC,YAAAA,WAAW,EAAE,KAAKA,WAHC;AAInBC,YAAAA,QAAQ,EAAE,EAAE,GAAG,KAAKA;AAAV,aAJS;AAKnBG,YAAAA,MAAM,EAAE,KAAKA;AALM,WAAvB;AAOH,SA/BwB,CAiCzB;;;AACOY,QAAAA,YAAY,GAAY;AAC3B,cAAI,KAAKX,YAAL,CAAkBY,MAAlB,KAA6B,CAAjC,EAAoC,OAAO,KAAP;AACpC,gBAAMC,SAAS,GAAG,KAAKb,YAAL,CAAkBc,GAAlB,EAAlB;AACA,cAAI,CAACD,SAAL,EAAgB,OAAO,KAAP;AAEhB,eAAKpB,QAAL,GAAgBoB,SAAS,CAACpB,QAA1B;AACA,eAAKC,QAAL,GAAgBmB,SAAS,CAACnB,QAA1B;AACA,eAAKC,WAAL,GAAmBkB,SAAS,CAAClB,WAA7B;AACA,eAAKC,QAAL,GAAgB,EAAE,GAAGiB,SAAS,CAACjB;AAAf,WAAhB;AACA,eAAKG,MAAL,GAAcc,SAAS,CAACd,MAAxB;AACA,iBAAO,IAAP;AACH,SA7CwB,CA+CzB;;;AACOgB,QAAAA,YAAY,GAAS;AACxB,eAAKf,YAAL,GAAoB,EAApB;AACH,SAlDwB,CAoDzB;;;AACOgB,QAAAA,eAAe,GAAW;AAC7B,iBAAO,KAAKhB,YAAL,CAAkBY,MAAzB;AACH;;AAvDwB,O;AA0D7B;AACA;AACA","sourcesContent":["import { CardConfig } from './CardData';\r\n\r\n/**\r\n * 运行时卡牌数据模型\r\n */\r\nexport class RuntimeCardData {\r\n    public readonly id: string;\r\n    public readonly config: CardConfig;\r\n    \r\n    public isFaceUp: boolean = false;\r\n    public isLocked: boolean = false;\r\n    public currentArea: string = '';\r\n    public position: { x: number; y: number } = { x: 0, y: 0 };\r\n    public zIndex: number = 0;\r\n    \r\n    private stateHistory: CardState[] = [];\r\n\r\n    constructor(config: CardConfig, id?: string) {\r\n        this.config = config;\r\n        this.id = id || this.generateId();\r\n        this.position = { ...config.Position };\r\n    }\r\n\r\n    private generateId(): string {\r\n        return `card_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\r\n    }\r\n\r\n    // 保存当前状态\r\n    public saveState(): void {\r\n        this.stateHistory.push({\r\n            isFaceUp: this.isFaceUp,\r\n            isLocked: this.isLocked,\r\n            currentArea: this.currentArea,\r\n            position: { ...this.position },\r\n            zIndex: this.zIndex\r\n        });\r\n    }\r\n\r\n    // 恢复到上一个状态\r\n    public restoreState(): boolean {\r\n        if (this.stateHistory.length === 0) return false;\r\n        const lastState = this.stateHistory.pop();\r\n        if (!lastState) return false;\r\n        \r\n        this.isFaceUp = lastState.isFaceUp;\r\n        this.isLocked = lastState.isLocked;\r\n        this.currentArea = lastState.currentArea;\r\n        this.position = { ...lastState.position };\r\n        this.zIndex = lastState.zIndex;\r\n        return true;\r\n    }\r\n\r\n    // 清空历史记录\r\n    public clearHistory(): void {\r\n        this.stateHistory = [];\r\n    }\r\n\r\n    // 获取历史记录数量\r\n    public getHistoryCount(): number {\r\n        return this.stateHistory.length;\r\n    }\r\n}\r\n\r\n/**\r\n * 卡牌状态接口\r\n */\r\nexport interface CardState {\r\n    isFaceUp: boolean;\r\n    isLocked: boolean;\r\n    currentArea: string;\r\n    position: { x: number; y: number };\r\n    zIndex: number;\r\n}\r\n"]}