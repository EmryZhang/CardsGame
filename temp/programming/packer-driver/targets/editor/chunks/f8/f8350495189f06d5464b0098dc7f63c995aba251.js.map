{"version":3,"sources":["file:///D:/Work/job/CardsGame/assets/Classes/utils/CardUtils.ts"],"names":["CardUtils","CardFace","CardSuit","isRedSuit","suit","HEART","DIAMOND","isBlackSuit","CLUB","SPADE","getSuitSymbol","symbols","getFaceText","face","faceTexts","getCardName","getFaceIndex","isFaceCard","JACK","KING","isAce","ACE","getFaceValue","compareFace","face1","face2","value1","value2","convertAbsoluteToRelative","x","y","designWidth","designHeight","convertRelativeToAbsolute","convertAbsoluteToRelativeForTable","relativeX","relativeY","TABLE_Y_OFFSET"],"mappings":"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","sourcesContent":["/**\r\n * 卡牌工具类\r\n * 封装卡牌相关的通用工具方法\r\n */\r\nimport { CardFace, CardSuit } from '../models/CardData';\r\n\r\nexport class CardUtils {\r\n    // 桌面牌Y轴偏移量（像素）\r\n    private static readonly TABLE_Y_OFFSET = 350;\r\n\r\n    /**\r\n     * 判断花色是否为红色（红桃或方块）\r\n     * @param suit 花色枚举值\r\n     * @returns 是否为红色\r\n     */\r\n    public static isRedSuit(suit: number): boolean {\r\n        return suit === CardSuit.HEART || suit === CardSuit.DIAMOND;\r\n    }\r\n\r\n    /**\r\n     * 判断花色是否为黑色（梅花或黑桃）\r\n     * @param suit 花色枚举值\r\n     * @returns 是否为黑色\r\n     */\r\n    public static isBlackSuit(suit: number): boolean {\r\n        return suit === CardSuit.CLUB || suit === CardSuit.SPADE;\r\n    }\r\n\r\n    /**\r\n     * 获取花色符号\r\n     * @param suit 花色枚举值\r\n     * @returns 花色符号字符串\r\n     */\r\n    public static getSuitSymbol(suit: number): string {\r\n        const symbols = ['♣', '♦', '♥', '♠'];\r\n        return symbols[suit] || '?';\r\n    }\r\n\r\n    /**\r\n     * 获取点数文本\r\n     * @param face 点数枚举值（0-12，对应A-K）\r\n     * @returns 点数文本字符串\r\n     */\r\n    public static getFaceText(face: number): string {\r\n        const faceTexts = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K'];\r\n        return faceTexts[face] || '?';\r\n    }\r\n\r\n    /**\r\n     * 获取卡牌完整名称\r\n     * @param suit 花色\r\n     * @param face 点数\r\n     * @returns 卡牌名称（如：♣A）\r\n     */\r\n    public static getCardName(suit: number, face: number): string {\r\n        return `${this.getSuitSymbol(suit)}${this.getFaceText(face)}`;\r\n    }\r\n\r\n    /**\r\n     * 获取点数对应的数组索引（0-12）\r\n     * @param face 点数枚举值（0-12）\r\n     * @returns 数组索引\r\n     */\r\n    public static getFaceIndex(face: number): number {\r\n        return face;\r\n    }\r\n\r\n    /**\r\n     * 判断是否为花牌（J、Q、K）\r\n     * @param face 点数\r\n     * @returns 是否为花牌\r\n     */\r\n    public static isFaceCard(face: number): boolean {\r\n        return face >= CardFace.JACK && face <= CardFace.KING;\r\n    }\r\n\r\n    /**\r\n     * 判断是否为A\r\n     * @param face 点数\r\n     * @returns 是否为A\r\n     */\r\n    public static isAce(face: number): boolean {\r\n        return face === CardFace.ACE;\r\n    }\r\n\r\n    /**\r\n     * 获取点数的数值（用于比较大小）\r\n     * @param face 点数\r\n     * @returns 数值（A=1, 2-10=点数, J=11, Q=12, K=13）\r\n     */\r\n    public static getFaceValue(face: number): number {\r\n        return face;\r\n    }\r\n\r\n    /**\r\n     * 比较两张牌的点数大小\r\n     * @param face1 第一张牌的点数\r\n     * @param face2 第二张牌的点数\r\n     * @returns 1表示face1大，-1表示face2大，0表示相等\r\n     */\r\n    public static compareFace(face1: number, face2: number): number {\r\n        const value1 = this.getFaceValue(face1);\r\n        const value2 = this.getFaceValue(face2);\r\n        if (value1 > value2) return 1;\r\n        if (value1 < value2) return -1;\r\n        return 0;\r\n    }\r\n\r\n    /**\r\n     * 将配置文件中的绝对坐标转换为相对坐标\r\n     * @param x 绝对坐标X\r\n     * @param y 绝对坐标Y\r\n     * @returns 相对坐标 { x, y }\r\n     */\r\n    public static convertAbsoluteToRelative(\r\n        x: number,\r\n        y: number\r\n    ): { x: number, y: number } {\r\n        // 从GameConfig读取设计分辨率\r\n        const designWidth = 1080; // 默认值\r\n        const designHeight = 2080; // 默认值\r\n\r\n        // 将坐标平移50%（减去屏幕分辨率的一半）\r\n        return {\r\n            x: x - designWidth / 2,\r\n            y: y - designHeight / 2\r\n        };\r\n    }\r\n\r\n    /**\r\n     * 将相对坐标转换为绝对坐标（用于手牌区平移）\r\n     * @param x 相对坐标X\r\n     * @param y 相对坐标Y\r\n     * @returns 绝对坐标 { x, y }\r\n     */\r\n    public static convertRelativeToAbsolute(\r\n        x: number,\r\n        y: number\r\n    ): { x: number, y: number } {\r\n        // 从GameConfig读取设计分辨率\r\n        const designWidth = 1080; // 默认值\r\n        const designHeight = 2080; // 默认值\r\n\r\n        // 将坐标平移50%（加上屏幕分辨率的一半）\r\n        return {\r\n            x: x + designWidth / 2,\r\n            y: y + designHeight / 2\r\n        };\r\n    }\r\n\r\n    /**\r\n     * 将配置文件中的绝对坐标转换为相对坐标（用于桌面牌，往上偏移TABLE_Y_OFFSET像素）\r\n     * @param x 绝对坐标X\r\n     * @param y 绝对坐标Y\r\n     * @returns 相对坐标 { x, y }\r\n     */\r\n    public static convertAbsoluteToRelativeForTable(\r\n        x: number,\r\n        y: number\r\n    ): { x: number, y: number } {\r\n        // 从GameConfig读取设计分辨率\r\n        const designWidth = 1080; // 默认值\r\n        const designHeight = 2080; // 默认值\r\n\r\n        // 将坐标平移50%（减去屏幕分辨率的一半）\r\n        let relativeX = x - designWidth / 2;\r\n        let relativeY = y - designHeight / 2;\r\n\r\n        // 往上偏移TABLE_Y_OFFSET像素\r\n        relativeY += CardUtils.TABLE_Y_OFFSET;\r\n\r\n        return {\r\n            x: relativeX,\r\n            y: relativeY\r\n        };\r\n    }\r\n}\r\n"]}