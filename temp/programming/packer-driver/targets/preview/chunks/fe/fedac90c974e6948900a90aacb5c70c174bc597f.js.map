{"version":3,"sources":["file:///D:/Work/job/CardsGame/assets/Classes/models/CardModel.ts"],"names":["CardModel","constructor","config","id","isFaceUp","isLocked","currentArea","position","x","y","zIndex","generateId","Position","Date","now","Math","random","toString","substr","updatePosition","updateArea","area","flip","setLocked","locked","clone","cloned"],"mappings":";;;8BAMaA,S;;;;;;;;;;;;;;;;;;;;AANb;AACA;AACA;AACA;;;2BAGaA,S,GAAN,MAAMA,SAAN,CAAgB;AAYsB;AAEzCC,QAAAA,WAAW,CAACC,MAAD,EAAqBC,EAArB,EAAkC;AAb7C;AAa6C,eAZ7BA,EAY6B;AAV7C;AAU6C,eAT7BD,MAS6B;AAP7C;AAO6C,eANtCE,QAMsC,GANlB,KAMkB;AANJ;AAMI,eALtCC,QAKsC,GALlB,KAKkB;AALJ;AAKI,eAJtCC,WAIsC,GAJhB,EAIgB;AAJJ;AAII,eAHtCC,QAGsC,GAHD;AAAEC,YAAAA,CAAC,EAAE,CAAL;AAAQC,YAAAA,CAAC,EAAE;AAAX,WAGC;AAHgB;AAGhB,eAFtCC,MAEsC,GAFrB,CAEqB;AACzC,eAAKR,MAAL,GAAcA,MAAd;AACA,eAAKC,EAAL,GAAUA,EAAE,IAAI,KAAKQ,UAAL,EAAhB;AACA,eAAKJ,QAAL,gBAAqBL,MAAM,CAACU,QAA5B;AACH;AAED;AACJ;AACA;;;AACYD,QAAAA,UAAU,GAAW;AACzB,2BAAeE,IAAI,CAACC,GAAL,EAAf,SAA6BC,IAAI,CAACC,MAAL,GAAcC,QAAd,CAAuB,EAAvB,EAA2BC,MAA3B,CAAkC,CAAlC,EAAqC,CAArC,CAA7B;AACH;AAED;AACJ;AACA;;;AACWC,QAAAA,cAAc,CAACX,CAAD,EAAYC,CAAZ,EAA6B;AAC9C,eAAKF,QAAL,GAAgB;AAAEC,YAAAA,CAAF;AAAKC,YAAAA;AAAL,WAAhB;AACH;AAED;AACJ;AACA;;;AACWW,QAAAA,UAAU,CAACC,IAAD,EAAqB;AAClC,eAAKf,WAAL,GAAmBe,IAAnB;AACH;AAED;AACJ;AACA;;;AACWC,QAAAA,IAAI,GAAS;AAChB,eAAKlB,QAAL,GAAgB,CAAC,KAAKA,QAAtB;AACH;AAED;AACJ;AACA;;;AACWmB,QAAAA,SAAS,CAACC,MAAD,EAAwB;AACpC,eAAKnB,QAAL,GAAgBmB,MAAhB;AACH;AAED;AACJ;AACA;;;AACWC,QAAAA,KAAK,GAAc;AACtB,cAAMC,MAAM,GAAG,IAAI1B,SAAJ,CAAc,KAAKE,MAAnB,EAA2B,KAAKC,EAAhC,CAAf;AACAuB,UAAAA,MAAM,CAACtB,QAAP,GAAkB,KAAKA,QAAvB;AACAsB,UAAAA,MAAM,CAACrB,QAAP,GAAkB,KAAKA,QAAvB;AACAqB,UAAAA,MAAM,CAACpB,WAAP,GAAqB,KAAKA,WAA1B;AACAoB,UAAAA,MAAM,CAACnB,QAAP,gBAAuB,KAAKA,QAA5B;AACAmB,UAAAA,MAAM,CAAChB,MAAP,GAAgB,KAAKA,MAArB;AACA,iBAAOgB,MAAP;AACH;;AAlEkB,O;AAqEvB;AACA;AACA","sourcesContent":["/**\r\n * 卡牌模型\r\n * 负责管理单张卡牌的数据和状态\r\n */\r\nimport { CardConfig } from './CardData';\r\n\r\nexport class CardModel {\r\n    // 卡牌唯一ID\r\n    public readonly id: string;\r\n\r\n    // 静态配置数据\r\n    public readonly config: CardConfig;\r\n\r\n    // 动态状态数据\r\n    public isFaceUp: boolean = false;        // 是否正面朝上\r\n    public isLocked: boolean = false;        // 是否被锁定（不可移动）\r\n    public currentArea: string = '';         // 当前所在区域（table/hand等）\r\n    public position: { x: number; y: number } = { x: 0, y: 0 };  // 当前位置\r\n    public zIndex: number = 0;               // 层级\r\n\r\n    constructor(config: CardConfig, id?: string) {\r\n        this.config = config;\r\n        this.id = id || this.generateId();\r\n        this.position = { ...config.Position };\r\n    }\r\n\r\n    /**\r\n     * 生成唯一ID\r\n     */\r\n    private generateId(): string {\r\n        return `card_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\r\n    }\r\n\r\n    /**\r\n     * 更新卡牌位置\r\n     */\r\n    public updatePosition(x: number, y: number): void {\r\n        this.position = { x, y };\r\n    }\r\n\r\n    /**\r\n     * 更新卡牌区域\r\n     */\r\n    public updateArea(area: string): void {\r\n        this.currentArea = area;\r\n    }\r\n\r\n    /**\r\n     * 翻转卡牌\r\n     */\r\n    public flip(): void {\r\n        this.isFaceUp = !this.isFaceUp;\r\n    }\r\n\r\n    /**\r\n     * 锁定/解锁卡牌\r\n     */\r\n    public setLocked(locked: boolean): void {\r\n        this.isLocked = locked;\r\n    }\r\n\r\n    /**\r\n     * 克隆卡牌状态\r\n     */\r\n    public clone(): CardModel {\r\n        const cloned = new CardModel(this.config, this.id);\r\n        cloned.isFaceUp = this.isFaceUp;\r\n        cloned.isLocked = this.isLocked;\r\n        cloned.currentArea = this.currentArea;\r\n        cloned.position = { ...this.position };\r\n        cloned.zIndex = this.zIndex;\r\n        return cloned;\r\n    }\r\n}\r\n\r\n/**\r\n * 卡牌状态接口（用于序列化）\r\n */\r\nexport interface CardState {\r\n    id: string;\r\n    face: number;\r\n    suit: number;\r\n    isFaceUp: boolean;\r\n    isLocked: boolean;\r\n    area: string;\r\n    position: { x: number; y: number };\r\n    zIndex: number;\r\n}\r\n"]}